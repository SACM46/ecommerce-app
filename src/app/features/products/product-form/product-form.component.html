<div class="container">
  <div class="page-header">
    <h1>{{ isEditMode ? '✏️ Editar' : '➕ Crear' }} Producto</h1>
    <p>{{ isEditMode ? 'Modifica' : 'Agrega' }} los detalles del producto</p>
  </div>

  <div class="form-container card">
    <form [formGroup]="productForm" (ngSubmit)="onSubmit()">
      <div class="form-group">
        <label>Nombre del Producto *</label>
        <input 
          type="text" 
          formControlName="title"
          placeholder="Ej: Refrigerador Samsung"
          [class.error]="title?.invalid && title?.touched"
        >
        <span class="error-message" *ngIf="title?.invalid && title?.touched">
          <span *ngIf="title?.errors?.['required']">El nombre es requerido</span>
          <span *ngIf="title?.errors?.['minlength']">Mínimo 3 caracteres</span>
        </span>
      </div>

      <div class="form-group">
        <label>Precio (USD) *</label>
        <input 
          type="number" 
          formControlName="price"
          placeholder="999.99"
          step="0.01"
          min="0"
          [class.error]="price?.invalid && price?.touched"
        >
        <span class="error-message" *ngIf="price?.invalid && price?.touched">
          <span *ngIf="price?.errors?.['required']">El precio es requerido</span>
          <span *ngIf="price?.errors?.['min']">El precio debe ser mayor a 0</span>
        </span>
      </div>

      <div class="form-group">
        <label>Descripción *</label>
        <textarea 
          formControlName="description"
          placeholder="Describe las características del producto..."
          rows="4"
          [class.error]="description?.invalid && description?.touched"
        ></textarea>
        <span class="error-message" *ngIf="description?.invalid && description?.touched">
          <span *ngIf="description?.errors?.['required']">La descripción es requerida</span>
          <span *ngIf="description?.errors?.['minlength']">Mínimo 10 caracteres</span>
        </span>
      </div>

      <div class="form-group">
        <label>ID Categoría *</label>
        <select 
          formControlName="categoryId"
          [class.error]="categoryId?.invalid && categoryId?.touched"
        >
          <option value="1">1 - Clothes</option>
          <option value="2">2 - Electronics</option>
          <option value="3">3 - Furniture</option>
          <option value="4">4 - Shoes</option>
          <option value="5">5 - Others</option>
        </select>
        <span class="error-message" *ngIf="categoryId?.invalid && categoryId?.touched">
          La categoría es requerida
        </span>
      </div>

      <div class="form-group">
        <label>URL de Imagen *</label>
        <input 
          type="url" 
          formControlName="image"
          placeholder="https://ejemplo.com/imagen.jpg"
          [class.error]="image?.invalid && image?.touched"
        >
        <span class="error-message" *ngIf="image?.invalid && image?.touched">
          <span *ngIf="image?.errors?.['required']">La URL es requerida</span>
          <span *ngIf="image?.errors?.['pattern']">URL inválida</span>
        </span>
      </div>

      <div class="form-group">
        <label>Stock *</label>
        <input 
          type="number" 
          formControlName="stock"
          placeholder="50"
          min="0"
          [class.error]="stock?.invalid && stock?.touched"
        >
        <span class="error-message" *ngIf="stock?.invalid && stock?.touched">
          <span *ngIf="stock?.errors?.['required']">El stock es requerido</span>
          <span *ngIf="stock?.errors?.['min']">El stock no puede ser negativo</span>
        </span>
      </div>

      <div class="form-actions">
        <button type="button" class="btn btn-secondary" (click)="onCancel()" [disabled]="loading">
          Cancelar
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="loading || productForm.invalid">
          <span *ngIf="!loading">{{ isEditMode ? '💾 Actualizar' : '➕ Crear' }}</span>
          <span *ngIf="loading">Guardando...</span>
        </button>
      </div>
    </form>
  </div>
</div>
